(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{166:function(t,e,r){"use strict";r(93),r(30);var a=r(167),s=r.n(a),n=r(168),o=r.n(n),i=r(60),u=r.n(i),l=function(){function t(){s()(this,t)}return o()(t,null,[{key:"getUserdata",value:function(t){var e=this;return u.a.create({baseURL:"https://api.github.com/",timeout:3e3}).get("users/"+t).then(function(r){var a=r.data;return{name:null!=a.name?a.name:t,avatar:e.photoUrl(t,250),company:a.company,location:a.location,blog:""!=a.blog?a.blog:null}}).catch(function(r){if(404==r.response.status)return{name:t,avatar:e.photoUrl(t,250),company:null,location:null,blog:null}})}},{key:"photoUrl",value:function(t,e){return t.startsWith("sample-")?this.langUrl(t.substring(7)):"https://github.com/"+t+".png?size="+e}},{key:"langUrl",value:function(t){return"https://anthive.io/skins/lang/"+t+".png"}},{key:"skinUrl",value:function(t){return"https://anthive.io/skins/client/"+t+"/ant.png"}},{key:"scoreString",value:function(t){var e=Math.floor(((""+t).length-1)/3);return parseFloat((0!=e?t/Math.pow(1e3,e):t).toPrecision(2))+["","K","M","B","t"][e]}},{key:"timeAgo",value:function(t){var e=Math.round(new Date)-t,r=2592e6,a=6048e5,s=864e5,n=36e5,o=6e4,i=1e3;return e>r?Math.floor(e/r)+"m ago":e>a?Math.floor(e/a)+"w ago":e>s?Math.floor(e/s)+"d ago":e>n?Math.floor(e/n)+"h ago":e>o?Math.floor(e/o)+"m ago":e>i?Math.floor(e/i)+"s ago":"Just now"}}]),t}();e.a=l},167:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},168:function(t,e){function r(t,e){for(var r=0;r<e.length;r++){var a=e[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}t.exports=function(t,e,a){return e&&r(t.prototype,e),a&&r(t,a),t}},171:function(t,e,r){var a=r(182);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r(24).default)("f62ad240",a,!0,{})},172:function(t,e,r){var a=r(184);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);(0,r(24).default)("26c5d22c",a,!0,{})},178:function(t,e,r){"use strict";var a=r(2),s=r(15),n=r(18),o=r(94),i=r(43),u=r(10),l=r(44).f,c=r(62).f,f=r(8).f,p=r(179).trim,h=a.Number,m=h,v=h.prototype,g="Number"==n(r(61)(v)),d="trim"in String.prototype,_=function(t){var e=i(t,!1);if("string"==typeof e&&e.length>2){var r,a,s,n=(e=d?e.trim():p(e,3)).charCodeAt(0);if(43===n||45===n){if(88===(r=e.charCodeAt(2))||120===r)return NaN}else if(48===n){switch(e.charCodeAt(1)){case 66:case 98:a=2,s=49;break;case 79:case 111:a=8,s=55;break;default:return+e}for(var o,u=e.slice(2),l=0,c=u.length;l<c;l++)if((o=u.charCodeAt(l))<48||o>s)return NaN;return parseInt(u,a)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,r=this;return r instanceof h&&(g?u(function(){v.valueOf.call(r)}):"Number"!=n(r))?o(new m(_(e)),r,h):_(e)};for(var b,y=r(5)?l(m):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),w=0;y.length>w;w++)s(m,b=y[w])&&!s(h,b)&&f(h,b,c(m,b));h.prototype=v,v.constructor=h,r(11)(a,"Number",h)}},179:function(t,e,r){var a=r(7),s=r(17),n=r(10),o=r(180),i="["+o+"]",u=RegExp("^"+i+i+"*"),l=RegExp(i+i+"*$"),c=function(t,e,r){var s={},i=n(function(){return!!o[t]()||"​"!="​"[t]()}),u=s[t]=i?e(f):o[t];r&&(s[r]=u),a(a.P+a.F*i,"String",s)},f=c.trim=function(t,e){return t=String(s(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=c},180:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"},181:function(t,e,r){"use strict";var a=r(171);r.n(a).a},182:function(t,e,r){(t.exports=r(23)(!1)).push([t.i,"",""])},183:function(t,e,r){"use strict";var a=r(172);r.n(a).a},184:function(t,e,r){(t.exports=r(23)(!1)).push([t.i,"\n.user__card-text{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis\n}",""])},187:function(t,e,r){"use strict";r.r(e);r(31);var a,s=r(3),n=r.n(s),o=(r(25),r(178),r(166)),i=r(167),u=r.n(i),l=r(168),c=r.n(l),f=r(60),p=r.n(f).a.create({baseURL:"https://search.anthive.io/",timeout:3e3}),h=new(function(){function t(){u()(this,t)}var e;return c()(t,[{key:"wrap",value:function(t){return{params:{source:JSON.stringify(t),source_content_type:"application/json"}}}},{key:"searchGames",value:(e=n()(regeneratorRuntime.mark(function t(e,r,a,s){var n,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return"/games-prod/_search",n={size:a,sort:e,from:a*(r-1),query:{bool:{filter:s}}},t.next=4,p.get("/games-prod/_search",this.wrap(n));case 4:if(200!=(o=t.sent).status){t.next=7;break}return t.abrupt("return",o.data.hits);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}},t,this)})),function(t,r,a,s){return e.apply(this,arguments)})}]),t}()),m={name:"gamesTable",props:{PageSize:{type:Number,required:!0,default:function(){return 10}},Filters:{type:Array,required:!0,default:function(){return[]}}},data:function(){return{us:o.a,loading:!1,pages:0,totalGames:0,currentPage:1,sort:[],columns:[{text:"Ticks",align:"left",sortable:!0,value:"Age"},{text:"Wealth",align:"right",sortable:!0,sort:"desc",value:"Wealth"},{text:"Date",align:"right",sortable:!0,value:"Played"}],items:[]}},created:function(){this.preapareSort(),this.loadGames()},methods:{changePage:function(t){this.currentPage=t,this.loadGames()},doSort:function(t){t.sortable&&(null==t.sort?t.sort="asc":"asc"==t.sort?t.sort="desc":"desc"==t.sort&&(t.sort=null),this.preapareSort(),this.loadGames())},preapareSort:function(){var t=this;this.sort=[],this.columns.forEach(function(e){if(null!=e.sort){var r={};r[e.value]=e.sort,t.sort.push(r)}})},dataTableClasses:function(t){return["column",t.sortable?"sortable":"",null!=t.sort?"active":""]},openGame:function(t){this.$router.push("/game/?id="+t._id+"&v="+t._source.Version)},getColumnData:function(t,e){var r="";switch(e.value){case"Age":r=t._source.Age;break;case"Played":r=this.us.timeAgo(t._source.Played)+"<br><span class='grey--text'>by "+t._source.Author+"</span>";break;case"Wealth":r=t._source.Wealth}return r},loadGames:(a=n()(regeneratorRuntime.mark(function t(){var e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:this.loading=!0,h.searchGames(this.sort,this.currentPage,this.PageSize,this.Filters).then(function(t){null!=t&&(e.pages=Math.ceil(t.total/e.PageSize),e.totalGames=t.total,e.items=t.hits),e.loading=!1});case 2:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)})}},v=(r(181),r(12)),g=Object(v.a)(m,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"games-table"}},[r("h3",{staticClass:"headline mt-1 mb-3"},[t._v("User games "),r("span",{staticClass:"grey--text"},[t._v("("+t._s(t.totalGames)+")")])]),r("v-data-table",{staticClass:"text-xs-center",attrs:{"hide-actions":"",loading:t.loading,headers:t.columns,items:t.items},scopedSlots:t._u([{key:"headers",fn:function(e){return[r("th",{staticClass:"text-xs-center"},[t._v("Player VS")]),t._l(e.headers,function(e,a){return r("th",{key:a,class:t.dataTableClasses(e),on:{click:function(r){t.doSort(e)}}},[t._v(t._s(e.text)),e.hasOwnProperty("sort")&&"desc"==e.sort?r("v-icon",{attrs:{small:""}},[t._v("arrow_upward")]):t._e(),e.hasOwnProperty("sort")&&"asc"==e.sort?r("v-icon",{attrs:{small:""}},[t._v("arrow_downward")]):t._e()],1)})]}},{key:"items",fn:function(e){return[r("tr",{staticStyle:{cursor:"pointer"},on:{click:function(r){t.openGame(e.item)}}},[r("td",[r("v-layout",{staticClass:"my-3",attrs:{column:"","align-center":""}},t._l(e.item._source.Players,function(e,a){return r("v-chip",{key:e.id,staticClass:"my-1"},[r("v-avatar",[r("img",{attrs:{src:t.us.photoUrl(e.Username,50)}})]),r("v-avatar",[r("img",{attrs:{src:t.us.langUrl(e.Lang)}})]),r("v-avatar",[r("img",{attrs:{src:t.us.skinUrl(e.Skin)}})]),r("v-avatar",{attrs:{color:"#F0DAB8"}},[t._v("v."+t._s(e.Version))]),r("b",[t._v(t._s(e.Username))]),r("span",[t._v("   "+t._s(e.Wealth))])],1)}))],1),t._l(t.columns,function(a,s){return r("td",{key:s,domProps:{innerHTML:t._s(t.getColumnData(e.item,a))}})})],2)]}}])}),r("v-toolbar",{attrs:{flat:""}},[r("v-pagination",{staticClass:"mx-auto",attrs:{length:t.pages,"total-visible":"10",color:"orange darken-3"},on:{input:function(e){t.changePage(e)}},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)},[],!1,null,null,null);g.options.__file="gamesTable.vue";var d={name:"user",data:function(){return{status:null,user:{},us:o.a,filters:[]}},created:function(){var t=this,e=this.$route.query.username.toLowerCase();""==e&&this.$router.push("/leaderboard"),this.filters=[{term:{"Players.Username":e}}],this.us.getUserdata(e).then(function(e){t.user=e})},components:{gamesTable:g.exports}},_=(r(183),Object(v.a)(d,function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"user"}},[r("v-container",[r("v-layout",{attrs:{row:"",wrap:"","mt-5":"","pt-5":""}},[r("v-flex",{staticClass:"mr-4 mb-4",attrs:{shrink:""}},[r("v-card",{attrs:{"max-width":"250"}},[t.user.avatar?t._e():r("v-img",{attrs:{"min-width":"250",src:"https://dummyimage.com/400x400/f1f1f1/f1f1f1"}}),t.user.avatar?r("v-img",{attrs:{"min-width":"250",src:t.user.avatar}}):t._e(),r("v-card-title",[r("h3",{staticClass:"headline"},[t._v(t._s(t.user.name))])]),t.user.company?r("v-card-text",{staticClass:"user__card-text pt-0"},[r("v-icon",{staticClass:"mr-2",attrs:{size:"20"}},[t._v("people")]),r("span",[t._v(t._s(t.user.company))])],1):t._e(),t.user.location?r("v-card-text",{staticClass:"user__card-text pt-0"},[r("v-icon",{staticClass:"mr-2",attrs:{size:"20"}},[t._v("place")]),r("span",[t._v(t._s(t.user.location))])],1):t._e(),t.user.blog?r("v-card-text",{staticClass:"user__card-text pt-0"},[r("v-icon",{staticClass:"mr-2",attrs:{size:"20"}},[t._v("public")]),r("a",{attrs:{href:t.user.blog,target:"_blank"}},[t._v(t._s(t.user.blog))])],1):t._e()],1)],1),r("v-flex",{attrs:{grow:""}},[r("gamesTable",{attrs:{Filters:t.filters,PageSize:17}})],1)],1)],1)],1)},[],!1,null,null,null));_.options.__file="user.vue";e.default=_.exports}}]);