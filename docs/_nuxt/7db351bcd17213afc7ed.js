(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{175:function(t,e,a){"use strict";a(96),a(31);var s=a(176),r=a.n(s),n=a(177),i=a.n(n),l=a(62),o=a.n(l),c=function(){function t(){r()(this,t)}return i()(t,null,[{key:"getUserdata",value:function(t){var e=this;return o.a.create({baseURL:"https://api.github.com/",timeout:3e3}).get("users/"+t).then(function(a){var s=a.data;return{name:null!=s.name?s.name:t,avatar:e.photoUrl(t,250),company:s.company,location:s.location,blog:""!=s.blog?s.blog:null}}).catch(function(a){if(404==a.response.status)return{name:t,avatar:e.photoUrl(t,250),company:null,location:null,blog:null}})}},{key:"photoUrl",value:function(t,e){return t.startsWith("sample-")?this.langUrl(t.substring(7)):"https://github.com/"+t+".png?size="+e}},{key:"langUrl",value:function(t){return"https://anthive.io/skins/lang/"+t+".png"}},{key:"skinUrl",value:function(t){return"https://anthive.io/skins/client/"+t+"/ant.png"}},{key:"scoreString",value:function(t){var e=Math.floor(((""+t).length-1)/3);return parseFloat((0!=e?t/Math.pow(1e3,e):t).toPrecision(2))+["","K","M","B","t"][e]}},{key:"timeAgo",value:function(t){var e=Math.round(new Date)-t,a=2592e6,s=6048e5,r=864e5,n=36e5,i=6e4,l=1e3;return e>a?Math.floor(e/a)+"m ago":e>s?Math.floor(e/s)+"w ago":e>r?Math.floor(e/r)+"d ago":e>n?Math.floor(e/n)+"h ago":e>i?Math.floor(e/i)+"m ago":e>l?Math.floor(e/l)+"s ago":"Just now"}}]),t}();e.a=c},176:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},177:function(t,e){function a(t,e){for(var a=0;a<e.length;a++){var s=e[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}t.exports=function(t,e,s){return e&&a(t.prototype,e),s&&a(t,s),t}},191:function(t,e,a){var s=a(204);"string"==typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);(0,a(14).default)("0df870fa",s,!0,{})},203:function(t,e,a){"use strict";var s=a(191);a.n(s).a},204:function(t,e,a){(t.exports=a(13)(!1)).push([t.i,"\n.leaderboard__card{margin-top:-178px\n}",""])},217:function(t,e,a){"use strict";a.r(e);a(30);var s,r=a(4),n=a.n(r),i=a(175),l=a(62),o=a.n(l),c={name:"Leaderboard",data:function(){return{us:i.a,players:[],elastic:o.a.create({baseURL:"https://search.anthive.io/",timeout:3e3})}},created:function(){this.getPlayers()},methods:{getPlayers:(s=n()(regeneratorRuntime.mark(function t(){var e,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading best players"),e={size:0,aggs:{by_player:{terms:{size:100,field:"Username.keyword",order:{total_wealth:"desc"}},aggs:{total_wealth:{sum:{field:"Wealth"}},total_games:{sum:{field:"Games"}}}}}},t.next=4,this.elastic.get("/players-prod/_search",this.wrap(e));case 4:a=t.sent,this.players=a.data.aggregations.by_player.buckets.map(function(t){return{Username:t.key,Wealth:t.total_wealth.value,Games:t.total_games.value}});case 6:case"end":return t.stop()}},t,this)})),function(){return s.apply(this,arguments)}),wrap:function(t){return{params:{source:JSON.stringify(t),source_content_type:"application/json"}}},pictureUrl:function(t,e){return this.us.photoUrl(t,e)}}},u=(a(203),a(3)),p=Object(u.a)(c,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"Leaderboard"}},[a("section",{staticClass:"section section-lg pt-lg-0"},[a("v-parallax",{attrs:{src:"/img/leaderboard_bg.png",align:"",height:"300"}}),a("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":""}},[a("v-flex",{attrs:{xs12:"",md8:"",offset2:""}},[a("v-card",{staticClass:"leaderboard__card"},[a("v-list",{staticClass:"pb-0",attrs:{"three-line":"",subheader:""}},[t._l(t.players.slice(0,3),function(e,s){return[a("v-list-tile",{attrs:{to:{path:"/user/?username="+e.Username}}},[a("v-list-tile-avatar",{staticClass:"mt-0"},[a("span",{staticClass:"title orange--text text--darken-3"},[t._v(t._s(s+1))])]),a("v-list-tile-avatar",{staticClass:"mt-0",attrs:{size:70}},[a("v-img",{attrs:{src:t.us.photoUrl(e.Username,70)}})],1),a("v-list-tile-content",[a("v-list-tile-title",{staticClass:"title px-3"},[t._v(t._s(e.Username))]),a("v-list-tile-sub-title",{staticClass:"px-3"},[t._v(t._s(e.Games)+" games")])],1),a("v-list-tile-action",{staticClass:"pr-3"},[a("span",{staticClass:"title"},[t._v(t._s(t.us.scoreString(e.Wealth))),a("v-icon",{staticClass:"orange--text text--lighten-2 ml-1"},[t._v("bubble_chart")])],1)])],1),a("v-divider")]})],2),a("v-list",{staticClass:"pb-0",attrs:{"two-line":"",subheader:""}},[t._l(t.players.slice(3),function(e,s){return[a("v-list-tile",{attrs:{to:{path:"/user/?username="+e.Username}}},[a("v-list-tile-avatar",[a("span",[t._v(t._s(s+4))])]),a("v-list-tile-avatar",{attrs:{size:40}},[a("v-img",{attrs:{src:t.us.photoUrl(e.Username,40)}})],1),a("v-list-tile-content",[a("v-list-tile-title",[t._v(t._s(e.Username))]),a("v-list-tile-sub-title",[t._v(t._s(e.Games)+" games")])],1),a("v-list-tile-action",{staticClass:"pr-3"},[a("span",{staticClass:"subtitle"},[t._v(t._s(t.us.scoreString(e.Wealth))),a("v-icon",{staticClass:"orange--text text--lighten-2 ml-1"},[t._v("bubble_chart")])],1)])],1),a("v-divider")]})],2)],1)],1)],1)],1)])},[],!1,null,null,null);p.options.__file="leaderboard.vue";e.default=p.exports}}]);