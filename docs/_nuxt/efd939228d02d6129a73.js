(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{173:function(t,e,s){"use strict";s.r(e);s(93),s(30);var a,i=s(3),l=s.n(i),r=s(84),n=s.n(r),c={name:"Leaderboard",data:function(){return{players:[],elastic:n.a.create({baseURL:"https://search.anthive.io/",timeout:3e3})}},created:function(){this.getPlayers()},methods:{getPlayers:(a=l()(regeneratorRuntime.mark(function t(){var e,s;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("loading best players"),e={size:0,aggs:{by_player:{terms:{size:100,field:"Username.keyword",order:{total_wealth:"desc"}},aggs:{total_wealth:{sum:{field:"Wealth"}},total_games:{sum:{field:"Games"}}}}}},t.next=4,this.elastic.get("/players-prod/_search",this.wrap(e));case 4:s=t.sent,this.players=s.data.aggregations.by_player.buckets.map(function(t){return{Username:t.key,Wealth:t.total_wealth.value,Games:t.total_games.value}});case 6:case"end":return t.stop()}},t,this)})),function(){return a.apply(this,arguments)}),wrap:function(t){return{params:{source:JSON.stringify(t),source_content_type:"application/json"}}},pictureUrl:function(t,e){return t.startsWith("sample-")?this.langUrl(t.substring(7)):"https://github.com/"+t+".png?size="+e},langUrl:function(t){return"https://anthive.io/skins/lang/"+t+".png"}}},o=s(14),u=Object(o.a)(c,function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"Leaderboard"}},[s("section",{staticClass:"section section-lg pt-lg-0"},[s("v-parallax",{attrs:{src:"/img/leaderboard_bg.png",align:"",height:"300"}}),s("v-layout",{attrs:{"align-center":"","justify-center":"",row:"","fill-height":"","mt-5":""}},[s("v-flex",{attrs:{xs12:"",md8:"",offset2:""}},[s("v-list",{attrs:{"three-line":""}},[t._l(t.players.slice(0,3),function(e,a){return[s("v-list-tile",[s("v-list-tile-avatar",[s("span",{staticClass:"title"},[t._v(t._s(a+1))])]),s("v-list-tile-avatar",{attrs:{size:70}},[s("v-img",{attrs:{src:t.pictureUrl(e.Username,70)}})],1),s("v-list-tile-content",[s("v-list-tile-title",{staticClass:"title px-3"},[t._v(t._s(e.Username))]),s("v-list-tile-sub-title",{staticClass:"px-3"},[t._v(t._s(e.Games)+" games")])],1),s("v-list-tile-action",[s("span",{staticClass:"title"},[t._v(t._s(e.Wealth)),s("v-icon",[t._v("attach_money")])],1)])],1),s("v-divider")]})],2),s("v-list",[t._l(t.players.slice(3),function(e,a){return[s("v-list-tile",[s("v-list-tile-avatar",[s("span",[t._v(t._s(a+4))])]),s("v-list-tile-avatar",{attrs:{size:40}},[s("v-img",{attrs:{src:t.pictureUrl(e.Username,40)}})],1),s("v-list-tile-content",[s("v-list-tile-title",[t._v(t._s(e.Username))]),s("v-list-tile-sub-title",[t._v(t._s(e.Games)+" games")])],1),s("v-list-tile-action",[s("span",{staticClass:"subtitle"},[t._v(t._s(e.Wealth)),s("v-icon",[t._v("attach_money")])],1)])],1),s("v-divider")]})],2)],1)],1)],1)])},[],!1,null,null,null);u.options.__file="leaderboard.vue";e.default=u.exports}}]);